<script setup>
import CodeBlock from '../components/CodeBlock.vue';

const exampleCode = `
<template>
    <div>
        <h3>Список пользователей:</h3>
        <ul>
        <li v-for="user in users" :key="user.id" v-memo="[user.id, user.name]">
            {{ user.name }}
            <button @click="changeUserName(user.id)">Изменить имя</button>
        </li>
        </ul>
    </div>
</template>

<script setup>
    import { ref } from 'vue';

    // Список пользователей
    const users = ref([
        { id: 1, name: 'Alice' },
        { id: 2, name: 'Bob' },
        { id: 3, name: 'Charlie' }
    ]);

    // Функция для изменения имени пользователя по id
    const changeUserName = (id) => {
        const user = users.value.find(u => u.id === id);
        if (user) {
            user.name = 'New Name';
        }
    };
</scriрt>
    
  `



</script>


<template>
    <main>
        <h1>V-MEMO</h1>
        <p>Директива v-memo в Vue 3 — это новая экспериментальная директива, которая позволяет мемоизировать результат
            рендера компонента, основываясь на определённых реактивных зависимостях. Это значит, что Vue будет
            "запоминать" предыдущее состояние компонента и перерендеривать его только тогда, когда изменятся указанные
            зависимости. В случае, если зависимости не изменились, компонент не будет повторно отрисован, что может
            улучшить производительность в некоторых случаях.</p>
        <h2>Тип данных:</h2>
        <ul>
            <li>Ожидает реактивные зависимости (обычно это реактивные переменные или выражения).</li>
        </ul>
        <h2>Назначение</h2>
        <ul>
            <li>Предотвращает ненужный рендеринг компонентов.</li>
            <li>Полезно для оптимизации производительности в приложениях, где компонент рендерится на основе
                определённых зависимостей.</li>
        </ul>
        <h2>Сокращенная запись</h2>
        <ul>
            <li>Нет сокращённой записи для v-memo. Эта директива используется полностью.</li>
        </ul>

        <h2>Пример на Vue 3 (Composition API)</h2>
        <CodeBlock :code="exampleCode" language="javascript" />
        <ul>
            <li>v-memo="[user.id, user.name]" — отслеживает уникальный id пользователя и его name. Это означает, что
                если изменится имя пользователя, Vue перерендерит только изменённый элемент списка.</li>
            <li>Преимущество: для больших списков пользователей или других элементов, которые часто изменяются, v-memo
                позволяет оптимизировать производительность, избегая перерисовки всего списка при изменении только
                одного элемента.</li>
        </ul>
        <h2>Подробный итог:</h2>
        <ul>
            <li>v-memo используется для кэширования рендеринга и предотвращения перерисовки компонентов, если их зависимые данные не изменились.</li>
            <li>Преимущества: улучшение производительности, особенно для сложных компонентов или больших списков, где повторный рендеринг может быть дорогостоящим.</li>
        </ul>
        <h2>v-memo — это полезный инструмент для производительных Vue-приложений, особенно в случаях, где необходимо избежать лишнего рендеринга.</h2>
    </main>
</template>


<style>
h1,
h2 {
    color: #42d392
}

main {
    color: white;
    font-size: 20px;
}

span {
    color: yellow
}
</style>
